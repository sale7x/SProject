<!DOCTYPE html>
<html>
<head>
  <title>Car Info</title>
</head>
<body>
<h1>Car Info</h1>

<button id="submitBtn">Add Part/Service</button>

<div id="inputFields"></div>

<div id="car-info"></div>

<script>
  // Get the car id from the URL parameter
  var urlParams = new URLSearchParams(window.location.search);
  var carId = urlParams.get('id');

  // Call an API endpoint to get the car details by id
  fetch('get-car-byID.php?id=' + carId)
          .then(function(response) {
            return response.json();
          })
          .then(function(car) {
            // Display the car details
            var carDetails = document.getElementById('car-info');
            carDetails.innerHTML = '<h2>' + car.carname + '</h2>' +
                    '<p>Model: ' + car.carmodel + '</p>' ;

          })
          .catch(function(error) {
            console.log(error);
          });


  // Add event listener to button
  document.getElementById("submitBtn").addEventListener("click", function() {
    // Create two new input fields
    var partname = document.createElement("input");
    partname.type = "text";
    partname.name = "partname";
    partname.placeholder = "Enter Part/Service name";

    var daysno = document.createElement("input");
    daysno.type = "number";
    daysno.name = "daysno";
    daysno.placeholder = "Enter days to remind";

    // Add input fields to the DOM
    document.getElementById("inputFields").appendChild(partname);
    document.getElementById("inputFields").appendChild(daysno);

    // Send data to PHP page using XMLHttpRequest
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "save-part.php", true);
    xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    xhr.onreadystatechange = function() {
      if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {
        console.log(this.responseText);
      }
    };
    xhr.send("partname=" + partname.value + "&daysno=" + daysno.value);
  });
</script>
</body>
</html>